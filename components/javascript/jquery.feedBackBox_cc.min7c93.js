function isValidEmailAddress(e){var a=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return a.test(e)}function isValidMobile(e){var a=new RegExp(/^[7-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$/i);return a.test(e)}function countChar(e){var a=e.value.length;a>=500?e.value=e.value.substring(0,feedback_message_count):$("#msg_count").text(feedback_message_count-a)}var feedback_message_count=400;$(function(){$(document).on("blur","#feedback_name",function(){var e=$.trim($(this).val());if(""==e)feedback.error($(this));else{var a=formatValidatorNew("",$(this),"","","",2,"","",2,31,"");0==a?feedback.error($(this)):feedback.success($(this))}}),$(document).on("blur","#feedback_email",function(){var e=$.trim($(this).val());if(isValidEmailAddress(e)){var a=formatValidatorNew("",$(this),"","","",20,"","",5,99);1==a||1==a?feedback.success($(this)):feedback.error($(this))}else feedback.error($(this))}),$(document).on("keypress","#feedback_email",function(e){return formatValidatorNew(e,$(this),"","","",20,"","",6,31,"")}),$(document).on("keypress","#feedback_mobile",function(e){return formatValidatorNew(e,$(this),"","","",19,"","","","","")}),$(document).on("keypress","#feedback_name",function(e){return formatValidatorNew(e,$(this),"","","",2,"","","","","")}),$(document).on("blur","#feedback_message",function(){var e=formatValidatorNew("",$(this),"","","","","","",10,feedback_message_count);0==e||0==e?feedback.error($(this)):feedback.success($(this))}),$(document).on("blur","#feedback_mobile",function(){var e=$.trim($(this).val());if(isValidMobile(e)){var a=formatValidatorNew("",$(this),"","","",19,"","",10,10);1==a||1==a?feedback.success($(this)):feedback.error($(this))}else feedback.error($(this))})}),function(e){e.fn.extend({feedBackBox:function(a){function i(){var a=e().jquery.split(".");a[0]=+a[0],a[1]=+a[1],a[0]>=1&&a[1]>=7?e(document).on("click",document,function(e){t(e)}):e(document).delegate("body",document,function(e){t(e)})}function s(e){return void 0===e.target&&(e.target=e.srcElement),e}function t(a){a=s(a),1===e("#fpi_content").length&&"DIV"===a.target.nodeName&&r&&(e("#fpi_feedback").animate({width:"+=5px"},"fast").animate({width:"-5px"},"slow").animate({width:"0"},"fast"),r=!r)}this.defaultOptions={title:"Feedback",titleMessage:"Leave a feedback",userName:"",isUsernameEnabled:!0,isUseremailEnabled:!0,isUsermobileEnabled:!0,isUserfeedbacktypeEnabled:!0,close_on_click_outside:!0,email:"",mobile:"",feedbacktype:"",message:"",ajaxUrl:"/common-request",successMessage:"Thank you for your valuable feedback.<br><br>For any queries, you could contact us at: <br>Email : care@paisabazaar.com <br>Toll Free Number :  1800 102 7718<br><br>Regards<br>Team PaisaBazaar",errorMessage:"Something wen't wrong!"};var r=!1,n=e.extend(!0,{},this.defaultOptions,a);return this.each(function(){var a,s=e(this),t=e.extend({},n);t.isUsernameEnabled||(a='disabled="disabled"');var o;t.isUseremailEnabled||(o='disabled="disabled"');var d;t.isUsermobileEnabled||(d='disabled="disabled"');var u;t.isUserfeedbacktypeEnabled||(u='disabled="disabled"'),t.close_on_click_outside===!0&&i(),s.html('<div id="fpi_feedback"><div id="fpi_title" class="rotate"><h2>'+t.title+'</h2></div><div id="fpi_content"><div id="fpi_header_message">'+t.titleMessage+'</div><form name="feedbackform"><div id="fpi_submit_username"><label for="username">Name</label><input id="feedback_name" maxlength="32" type="text" autocomplete="off" name="username" '+a+' value="'+t.userName+'" class="input_type"></div><div id="fpi_submit_useremail"><label for="useremail">Email</label><input id="feedback_email" maxlength="32" type="text"  autocomplete="off" name="useremail" '+o+' value="'+t.email+'" class="input_type"></div><div id="fpi_submit_usermobile"><label for="usermobile">Mobile</label><input id="feedback_mobile" type="text"  autocomplete="off" maxlength="10" name="usermobile" '+d+' value="'+t.mobile+'" class="input_type" maxlength="10"></div><div id="fpi_submit_userfeedbacktype"><label for="userfeedbacktype">Feedback Type</label><select id="userfeedbacktype" name="userfeedbacktype" class="select_type"><option value="0">---Select---</option><option value="1">Query</option><option value="2">Service Request</option><option value="3">Feedback</option><option value="4">Complaint</option></select></div><div id="fpi_submit_message"><label for="message">Message</label><textarea id="feedback_message" maxlength="'+feedback_message_count+'" name="message" onkeyup="countChar(this)"></textarea><sub><b>Message Count : </b><span id="msg_count">'+feedback_message_count+'</span></sub></div><div id="fpi_submit_loading"><img src="/components/images/loading.gif"></div><div id="fpi_submit_submit"><input type="submit" value="Submit"></div></form><div id="fpi_ajax_message"></div></div></div>'),e("#fpi_submit_username input").change(function(){""!=e(this).val()&&e(this).removeClass("error")}),e("#fpi_submit_useremail input").change(function(){""!=e(this).val()&&isValidEmailAddress(e(this).val())&&e(this).removeClass("error")}),e("#fpi_submit_usermobile input").change(function(){""!=e(this).val()&&isValidMobile(e(this).val())&&e(this).removeClass("error")}),e("#fpi_submit_userfeedbacktype").change(function(){0!=e("#userfeedbacktype option:selected").val()&&e("#userfeedbacktype").removeClass("error")}),e("#fpi_submit_message textarea").change(function(){""!=e(this).val()&&e(this).removeClass("error")}),s.find("form").submit(function(){var i=!1;if(""==e("#fpi_submit_username input").val()&&"undefined"==typeof a)i=!0,e("#fpi_submit_username input").addClass("error");else{var s=formatValidatorNew("",e("#fpi_submit_username input"),"","","",2,"","",2,31,"");0==s&&(feedback.error(e(this)),i=!0)}if(""==e("#fpi_submit_useremail input").val()&&"undefined"==typeof o)i=!0,e("#fpi_submit_useremail input").addClass("error");else{var r=formatValidatorNew("",e("#fpi_submit_useremail input"),"","","",20,"","",6,64,"");0==r&&(i=!0,e("#fpi_submit_useremail input").addClass("error"))}if(""==e("#fpi_submit_usermobile input").val()&&"undefined"==typeof d&&(i=!0,e("#fpi_submit_usermobile input").addClass("error")),0==e("#fpi_submit_userfeedbacktype select").val()&&"undefined"==typeof u&&(i=!0,e("#fpi_submit_userfeedbacktype select").addClass("error")),""==e("#fpi_submit_message textarea").val())i=!0,e("#fpi_submit_message textarea").addClass("error");else{var s=formatValidatorNew("",e("#fpi_submit_message textarea"),"","","","","","",10,feedback_message_count);0==s||0==s?(feedback.error(e("#fpi_submit_message")),i=!0):feedback.success(e("#fpi_submit_message"))}if(!i){var n=e(this).find(":input:disabled").removeAttr("disabled"),l=e(this).serialize();n.attr("disabled","disabled");var f=e("#feedback_name").val();e("#fpi_submit_submit input").attr("disabled","disabled"),e.ajax({type:"POST",dataType:"json",url:t.ajaxUrl,data:l+"&step=feedback",beforeSend:function(){e("#fpi_submit_loading").show()},error:function(a){e("#fpi_content form").hide(),e("#fpi_content #fpi_ajax_message h2").html(t.errorMessage)},success:function(a){e("#fpi_content form").remove(),t.successMessage="Dear "+f+",<br><br>"+t.successMessage,""!=a.message&&(t.successMessage=a.message),e("#fpi_ajax_message").append(t.successMessage),setTimeout(function(){e("#fpi_feedback").css({width:"0"})},6e3)}})}return!1}),e("#fpi_title").click(function(){r?(e("#fpi_feedback").animate({width:"+=5px"},"fast").animate({width:"-5px"},"slow").animate({width:"0"},"fast"),r=!r):(e("#fpi_feedback").animate({width:"-=5px"},"fast").animate({width:"305px"},"slow").animate({width:"300px"},"fast"),e("#fpi_submit_loading").hide(),e("#fpi_content form").show(),e("#fpi_content form .error").removeClass("error"),e("#fpi_submit_submit input").removeAttr("disabled"),r=!r)})})}})}(jQuery),feedback={error:function(e){$(e).addClass("error")},success:function(e){$(e).removeClass("error")}};